(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var V,g,$e,D,de,Le,Ee,Pe,ae,ee,te,R={},Te=[],ze=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function I(e,t){for(var n in t)e[n]=t[n];return e}function ie(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Je(e,t,n){var o,r,s,i={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?V.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)i[s]===void 0&&(i[s]=e.defaultProps[s]);return U(e,i,o,r,null)}function U(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++$e,__i:-1,__u:0};return r==null&&g.vnode!=null&&g.vnode(s),s}function K(e){return e.children}function F(e,t){this.props=e,this.context=t}function N(e,t){if(t==null)return e.__?N(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?N(e):null}function Ie(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ie(e)}}function ue(e){(!e.__d&&(e.__d=!0)&&D.push(e)&&!W.__r++||de!=g.debounceRendering)&&((de=g.debounceRendering)||Le)(W)}function W(){for(var e,t,n,o,r,s,i,_=1;D.length;)D.length>_&&D.sort(Ee),e=D.shift(),_=D.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,s=[],i=[],t.__P&&((n=I({},o)).__v=o.__v+1,g.vnode&&g.vnode(n),ce(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,s,r??N(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,He(s,n,i),o.__e=o.__=null,n.__e!=r&&Ie(n)));W.__r=0}function De(e,t,n,o,r,s,i,_,d,c,f){var l,u,h,y,L,x,m,b=o&&o.__k||Te,P=t.length;for(d=Ge(n,t,b,d,P),l=0;l<P;l++)(h=n.__k[l])!=null&&(u=h.__i==-1?R:b[h.__i]||R,h.__i=l,x=ce(e,h,u,r,s,i,_,d,c,f),y=h.__e,h.ref&&u.ref!=h.ref&&(u.ref&&_e(u.ref,null,h),f.push(h.ref,h.__c||y,h)),L==null&&y!=null&&(L=y),(m=!!(4&h.__u))||u.__k===h.__k?d=Ae(h,d,e,m):typeof h.type=="function"&&x!==void 0?d=x:y&&(d=y.nextSibling),h.__u&=-7);return n.__e=L,d}function Ge(e,t,n,o,r){var s,i,_,d,c,f=n.length,l=f,u=0;for(e.__k=new Array(r),s=0;s<r;s++)(i=t[s])!=null&&typeof i!="boolean"&&typeof i!="function"?(d=s+u,(i=e.__k[s]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?U(null,i,null,null,null):Q(i)?U(K,{children:i},null,null,null):i.constructor==null&&i.__b>0?U(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,_=null,(c=i.__i=Ve(i,n,d,l))!=-1&&(l--,(_=n[c])&&(_.__u|=2)),_==null||_.__v==null?(c==-1&&(r>f?u--:r<f&&u++),typeof i.type!="function"&&(i.__u|=4)):c!=d&&(c==d-1?u--:c==d+1?u++:(c>d?u--:u++,i.__u|=4))):e.__k[s]=null;if(l)for(s=0;s<f;s++)(_=n[s])!=null&&(2&_.__u)==0&&(_.__e==o&&(o=N(_)),Oe(_,_));return o}function Ae(e,t,n,o){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Ae(r[s],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=N(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ve(e,t,n,o){var r,s,i,_=e.key,d=e.type,c=t[n],f=c!=null&&(2&c.__u)==0;if(c===null&&e.key==null||f&&_==c.key&&d==c.type)return n;if(o>(f?1:0)){for(r=n-1,s=n+1;r>=0||s<t.length;)if((c=t[i=r>=0?r--:s++])!=null&&(2&c.__u)==0&&_==c.key&&d==c.type)return i}return-1}function he(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ze.test(t)?n:n+"px"}function M(e,t,n,o,r){var s,i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||he(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||he(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Pe,"$1")),i=t.toLowerCase(),t=i in e||t=="onFocusOut"||t=="onFocusIn"?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=ae,e.addEventListener(t,s?te:ee,s)):e.removeEventListener(t,s?te:ee,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function fe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ae++;else if(t.t<n.u)return;return n(g.event?g.event(t):t)}}}function ce(e,t,n,o,r,s,i,_,d,c){var f,l,u,h,y,L,x,m,b,P,T,O,A,Y,p,v,$,k=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),s=[_=t.__e=n.__e]),(f=g.__b)&&f(t);e:if(typeof k=="function")try{if(m=t.props,b="prototype"in k&&k.prototype.render,P=(f=k.contextType)&&o[f.__c],T=f?P?P.props.value:f.__:o,n.__c?x=(l=t.__c=n.__c).__=l.__E:(b?t.__c=l=new k(m,T):(t.__c=l=new F(m,T),l.constructor=k,l.render=Ke),P&&P.sub(l),l.props=m,l.state||(l.state={}),l.context=T,l.__n=o,u=l.__d=!0,l.__h=[],l._sb=[]),b&&l.__s==null&&(l.__s=l.state),b&&k.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=I({},l.__s)),I(l.__s,k.getDerivedStateFromProps(m,l.__s))),h=l.props,y=l.state,l.__v=t,u)b&&k.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),b&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(b&&k.getDerivedStateFromProps==null&&m!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,T),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,T)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(l.props=m,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(E){E&&(E.__=t)}),O=0;O<l._sb.length;O++)l.__h.push(l._sb[O]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,T),b&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,y,L)})}if(l.context=T,l.props=m,l.__P=e,l.__e=!1,A=g.__r,Y=0,b){for(l.state=l.__s,l.__d=!1,A&&A(t),f=l.render(l.props,l.state,l.context),p=0;p<l._sb.length;p++)l.__h.push(l._sb[p]);l._sb=[]}else do l.__d=!1,A&&A(t),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++Y<25);l.state=l.__s,l.getChildContext!=null&&(o=I(I({},o),l.getChildContext())),b&&!u&&l.getSnapshotBeforeUpdate!=null&&(L=l.getSnapshotBeforeUpdate(h,y)),v=f,f!=null&&f.type===K&&f.key==null&&(v=Ne(f.props.children)),_=De(e,Q(v)?v:[v],t,n,o,r,s,i,_,d,c),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),x&&(l.__E=l.__=null)}catch(E){if(t.__v=null,d||s!=null)if(E.then){for(t.__u|=d?160:128;_&&_.nodeType==8&&_.nextSibling;)_=_.nextSibling;s[s.indexOf(_)]=null,t.__e=_}else{for($=s.length;$--;)ie(s[$]);ne(t)}else t.__e=n.__e,t.__k=n.__k,E.then||ne(t);g.__e(E,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):_=t.__e=Qe(n.__e,t,n,o,r,s,i,d,c);return(f=g.diffed)&&f(t),128&t.__u?void 0:_}function ne(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ne)}function He(e,t,n){for(var o=0;o<n.length;o++)_e(n[o],n[++o],n[++o]);g.__c&&g.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){g.__e(s,r.__v)}})}function Ne(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Q(e)?e.map(Ne):I({},e)}function Qe(e,t,n,o,r,s,i,_,d){var c,f,l,u,h,y,L,x=n.props,m=t.props,b=t.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((h=s[c])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){e=h,s[c]=null;break}}if(e==null){if(b==null)return document.createTextNode(m);e=document.createElementNS(r,b,m.is&&m),_&&(g.__m&&g.__m(t,s),_=!1),s=null}if(b==null)x===m||_&&e.data==m||(e.data=m);else{if(s=s&&V.call(e.childNodes),x=n.props||R,!_&&s!=null)for(x={},c=0;c<e.attributes.length;c++)x[(h=e.attributes[c]).name]=h.value;for(c in x)if(h=x[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=h;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;M(e,c,null,h,r)}}for(c in m)h=m[c],c=="children"?u=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?y=h:c=="checked"?L=h:_&&typeof h!="function"||x[c]===h||M(e,c,h,x[c],r);if(f)_||l&&(f.__html==l.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(l&&(e.innerHTML=""),De(t.type=="template"?e.content:e,Q(u)?u:[u],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,i,s?s[0]:n.__k&&N(n,0),_,d),s!=null)for(c=s.length;c--;)ie(s[c]);_||(c="value",b=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[c]||b=="progress"&&!y||b=="option"&&y!=x[c])&&M(e,c,y,x[c],r),c="checked",L!=null&&L!=e[c]&&M(e,c,L,x[c],r))}return e}function _e(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){g.__e(r,n)}}function Oe(e,t,n){var o,r;if(g.unmount&&g.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||_e(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){g.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Oe(o[r],t,n||typeof e.type!="function");n||ie(e.__e),e.__c=e.__=e.__e=void 0}function Ke(e,t,n){return this.constructor(e,n)}function Ye(e,t,n){var o,r,s,i;t==document&&(t=document.documentElement),g.__&&g.__(e,t),r=(o=!1)?null:t.__k,s=[],i=[],ce(t,e=t.__k=Je(K,null,[e]),r||R,R,t.namespaceURI,r?null:t.firstChild?V.call(t.childNodes):null,s,r?r.__e:t.firstChild,o,i),He(s,e,i)}V=Te.slice,g={__e:function(e,t,n,o){for(var r,s,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(_){e=_}throw e}},$e=0,F.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=I({},this.state),typeof e=="function"&&(e=e(I({},n),this.props)),e&&I(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ue(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ue(this))},F.prototype.render=K,D=[],Le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ee=function(e,t){return e.__v.__b-t.__v.__b},W.__r=0,Pe=/(PointerCapture)$|Capture$/i,ae=0,ee=fe(!1),te=fe(!0);var Xe=0;function a(e,t,n,o,r,s){t||(t={});var i,_,d=t;if("ref"in d)for(_ in d={},t)_=="ref"?i=t[_]:d[_]=t[_];var c={type:e,props:d,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Xe,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(i=e.defaultProps))for(_ in i)d[_]===void 0&&(d[_]=i[_]);return g.vnode&&g.vnode(c),c}var z,w,X,pe,re=0,Re=[],C=g,me=C.__b,be=C.__r,ge=C.diffed,ve=C.__c,ye=C.unmount,we=C.__;function Me(e,t){C.__h&&C.__h(w,e,re||t),re=0;var n=w.__H||(w.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return re=1,Ze(Ue,e)}function Ze(e,t,n){var o=Me(z++,2);if(o.t=e,!o.__c&&(o.__=[Ue(void 0,t),function(_){var d=o.__N?o.__N[0]:o.__[0],c=o.t(d,_);d!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=w,!w.__f)){var r=function(_,d,c){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(u){return!!u.__c});if(f.every(function(u){return!u.__N}))return!s||s.call(this,_,d,c);var l=o.__c.props!==_;return f.forEach(function(u){if(u.__N){var h=u.__[0];u.__=u.__N,u.__N=void 0,h!==u.__[0]&&(l=!0)}}),s&&s.call(this,_,d,c)||l};w.__f=!0;var s=w.shouldComponentUpdate,i=w.componentWillUpdate;w.componentWillUpdate=function(_,d,c){if(this.__e){var f=s;s=void 0,r(_,d,c),s=f}i&&i.call(this,_,d,c)},w.shouldComponentUpdate=r}return o.__N||o.__}function xe(e,t){var n=Me(z++,3);!C.__s&&nt(n.__H,t)&&(n.__=e,n.u=t,w.__H.__h.push(n))}function et(){for(var e;e=Re.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(j),e.__H.__h.forEach(oe),e.__H.__h=[]}catch(t){e.__H.__h=[],C.__e(t,e.__v)}}C.__b=function(e){w=null,me&&me(e)},C.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),we&&we(e,t)},C.__r=function(e){be&&be(e),z=0;var t=(w=e.__c).__H;t&&(X===w?(t.__h=[],w.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(j),t.__h.forEach(oe),t.__h=[],z=0)),X=w},C.diffed=function(e){ge&&ge(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Re.push(t)!==1&&pe===C.requestAnimationFrame||((pe=C.requestAnimationFrame)||tt)(et)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),X=w=null},C.__c=function(e,t){t.some(function(n){try{n.__h.forEach(j),n.__h=n.__h.filter(function(o){return!o.__||oe(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],C.__e(o,n.__v)}}),ve&&ve(e,t)},C.unmount=function(e){ye&&ye(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{j(o)}catch(r){t=r}}),n.__H=void 0,t&&C.__e(t,n.__v))};var Ce=typeof requestAnimationFrame=="function";function tt(e){var t,n=function(){clearTimeout(o),Ce&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Ce&&(t=requestAnimationFrame(n))}function j(e){var t=w,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),w=t}function oe(e){var t=w;e.__c=e.__(),w=t}function nt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Ue(e,t){return typeof t=="function"?t(e):t}const rt={open:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",closed:"bg-gray-100 text-gray-800"},ot={open:"Open",in_progress:"In Progress",closed:"Closed"};function Fe({status:e}){return a("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${rt[e]}`,children:ot[e]})}function se({label:e,onRemove:t}){return a("span",{class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:e.color},children:[e.name,t&&a("button",{onClick:t,class:"hover:opacity-75 ml-1","aria-label":`Remove ${e.name} label`,children:"×"})]})}function st({issue:e,onClick:t}){const n=new Date(e.created_at).toLocaleDateString();return a("div",{onClick:t,class:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer",children:[a("div",{class:"flex items-start justify-between mb-2",children:[a("h3",{class:"text-lg font-semibold text-gray-900 flex-1",children:["#",e.id," ",e.title]}),a(Fe,{status:e.status})]}),e.description&&a("p",{class:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),a("div",{class:"flex items-center justify-between",children:[a("div",{class:"flex gap-2 flex-wrap",children:e.labels.map(o=>a(se,{label:o},o.id))}),a("span",{class:"text-xs text-gray-500",children:n})]})]})}function lt({issues:e,onIssueClick:t,onCreateClick:n,statusFilter:o,onStatusFilterChange:r}){return a("div",{children:[a("div",{class:"flex items-center justify-between mb-6",children:[a("div",{class:"flex gap-2",children:[a("button",{onClick:()=>r("all"),class:`px-3 py-1 rounded-md text-sm font-medium ${o==="all"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All"}),a("button",{onClick:()=>r("open"),class:`px-3 py-1 rounded-md text-sm font-medium ${o==="open"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Open"}),a("button",{onClick:()=>r("in_progress"),class:`px-3 py-1 rounded-md text-sm font-medium ${o==="in_progress"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"In Progress"}),a("button",{onClick:()=>r("closed"),class:`px-3 py-1 rounded-md text-sm font-medium ${o==="closed"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Closed"})]}),a("button",{onClick:n,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:"+ New Issue"})]}),e.length===0?a("div",{class:"text-center py-12 bg-white rounded-lg shadow",children:a("p",{class:"text-gray-500",children:"No issues found"})}):a("div",{class:"space-y-3",children:e.map(s=>a(st,{issue:s,onClick:()=>t(s)},s.id))})]})}function at({onSubmit:e}){const[t,n]=S(""),[o,r]=S(""),[s,i]=S(!1);return a("form",{onSubmit:async d=>{if(d.preventDefault(),!(!t.trim()||!o.trim())){i(!0);try{await e(t,o),n(""),r("")}finally{i(!1)}}},class:"space-y-3",children:[a("div",{children:a("input",{type:"text",placeholder:"Your name",value:t,onInput:d=>n(d.target.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})}),a("div",{children:a("textarea",{placeholder:"Add a comment...",value:o,onInput:d=>r(d.target.value),rows:3,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})}),a("button",{type:"submit",disabled:s||!t.trim()||!o.trim(),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Adding...":"Add Comment"})]})}function it({issue:e,allLabels:t,onBack:n,onStatusChange:o,onAddComment:r,onAddLabel:s,onRemoveLabel:i}){const[_,d]=S(!1),c=new Date(e.created_at).toLocaleDateString(),f=new Date(e.updated_at).toLocaleDateString(),l=t.filter(u=>!e.labels.some(h=>h.id===u.id));return a("div",{class:"space-y-6",children:[a("div",{class:"flex items-center gap-3",children:a("button",{onClick:n,class:"text-blue-600 hover:text-blue-700 font-medium",children:"← Back to list"})}),a("div",{class:"bg-white rounded-lg shadow p-6",children:[a("div",{class:"flex items-start justify-between mb-4",children:[a("div",{class:"flex-1",children:[a("h1",{class:"text-2xl font-bold text-gray-900 mb-2",children:["#",e.id," ",e.title]}),a("div",{class:"flex gap-2 text-sm text-gray-500",children:[a("span",{children:["Created ",c]}),a("span",{children:"•"}),a("span",{children:["Updated ",f]})]})]}),a("div",{class:"flex items-center gap-3",children:[a("select",{value:e.status,onChange:u=>o(u.target.value),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a("option",{value:"open",children:"Open"}),a("option",{value:"in_progress",children:"In Progress"}),a("option",{value:"closed",children:"Closed"})]}),a(Fe,{status:e.status})]})]}),e.description&&a("div",{class:"mb-4",children:[a("h3",{class:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),a("p",{class:"text-gray-600 whitespace-pre-wrap",children:e.description})]}),a("div",{class:"mb-4",children:[a("h3",{class:"text-sm font-medium text-gray-700 mb-2",children:"Labels"}),a("div",{class:"flex gap-2 flex-wrap items-center",children:[e.labels.map(u=>a(se,{label:u,onRemove:()=>i(u.id)},u.id)),l.length>0&&a("div",{class:"relative",children:[a("button",{onClick:()=>d(!_),class:"px-3 py-1 text-xs border-2 border-dashed border-gray-300 rounded-full hover:border-gray-400 text-gray-600",children:"+ Add label"}),_&&a("div",{class:"absolute z-10 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 min-w-[200px]",children:l.map(u=>a("button",{onClick:()=>{s(u.id),d(!1)},class:"block w-full text-left px-3 py-2 hover:bg-gray-100 rounded",children:a(se,{label:u})},u.id))})]})]})]})]}),a("div",{class:"bg-white rounded-lg shadow p-6",children:[a("h2",{class:"text-lg font-semibold text-gray-900 mb-4",children:["Comments (",e.comments?.length||0,")"]}),e.comments&&e.comments.length>0&&a("div",{class:"space-y-4 mb-6",children:e.comments.map(u=>a("div",{class:"border-l-4 border-blue-500 pl-4 py-2",children:[a("div",{class:"flex items-center gap-2 mb-1",children:[a("span",{class:"font-medium text-gray-900",children:u.author}),a("span",{class:"text-xs text-gray-500",children:new Date(u.created_at).toLocaleString()})]}),a("p",{class:"text-gray-700 whitespace-pre-wrap",children:u.content})]},u.id))}),a(at,{onSubmit:r})]})]})}function ct({onClose:e,onSubmit:t}){const[n,o]=S(""),[r,s]=S(""),[i,_]=S("medium"),[d,c]=S(!1);return a("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a("div",{class:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6",children:[a("div",{class:"flex items-center justify-between mb-4",children:[a("h2",{class:"text-xl font-bold text-gray-900",children:"Create New Issue"}),a("button",{onClick:e,class:"text-gray-400 hover:text-gray-600",disabled:d,children:"✕"})]}),a("form",{onSubmit:async l=>{if(l.preventDefault(),!!n.trim()){c(!0);try{await t(n,r,i),e()}finally{c(!1)}}},class:"space-y-4",children:[a("div",{children:[a("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),a("input",{type:"text",value:n,onInput:l=>o(l.target.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the issue",disabled:d,required:!0})]}),a("div",{children:[a("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a("textarea",{value:r,onInput:l=>s(l.target.value),rows:5,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Detailed description of the issue...",disabled:d})]}),a("div",{children:[a("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),a("select",{value:i,onChange:l=>_(l.target.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d,children:[a("option",{value:"low",children:"Low"}),a("option",{value:"medium",children:"Medium"}),a("option",{value:"high",children:"High"})]})]}),a("div",{class:"flex justify-end gap-3 pt-4",children:[a("button",{type:"button",onClick:e,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:d,children:"Cancel"}),a("button",{type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:d||!n.trim(),children:d?"Creating...":"Create Issue"})]})]})]})})}const je="countcachula-v1",Be="/_countcachula/meta";async function _t(){const t=await(await caches.open(je)).match(Be);return t?(await t.json()).lastSync:null}async function ke(){await(await caches.open(je)).put(new Request(Be),new Response(JSON.stringify({lastSync:new Date().toISOString()})))}const le="countcachula-v1";class dt{constructor(t){this.eventSource=t}close(){this.eventSource.close()}}const B=new Map,ut=new Map,H=new Map;let J=[],Z=0,G={onInvalidate:!1,onHint:!0,maxConcurrent:3};class ht{constructor(t,n){this.observers=new Set,this.started=!1,this.startFn=t,this.cleanupFn=n}observe(t){return this.observers.add(t),this.started||(this.started=!0,this.startFn()),()=>{this.observers.delete(t),this.observers.size===0&&this.cleanupFn&&this.cleanupFn()}}notify(t){this.observers.forEach(n=>n(t))}hasObservers(){return this.observers.size>0}}function q(e){if(e.method!=="GET")throw new Error("CountCachula.fetch() only supports GET requests. Use regular fetch() for mutations.");const t=e.url,n=new ht(()=>{qe(e,n)},()=>{const o=H.get(t);o&&(o.delete(n),o.size===0&&H.delete(t))});return H.has(t)||H.set(t,new Set),H.get(t).add(n),n}async function qe(e,t){try{const n=await caches.open(le),o=await n.match(e);if(o){t.notify(o.clone());try{const r=await globalThis.fetch(e);Se(e.url,r),await n.put(e,r.clone()),await ke(),t.notify(r.clone())}catch(r){console.warn("Background revalidation failed:",r)}}else{const r=await globalThis.fetch(e);Se(e.url,r),await n.put(e,r.clone()),await ke(),t.notify(r.clone())}}catch(n){throw console.error("Fetch failed:",n),n}}function Se(e,t){const n=t.headers.get("Cache-Tags");if(!n)return;const o=n.split(",").map(r=>r.trim());ut.set(e,new Set(o)),o.forEach(r=>{B.has(r)||B.set(r,new Set),B.get(r).add(e)})}async function ft(e,t={}){t.preload&&(G={...G,...t.preload});const n=await _t(),o=n?`${e}?since=${n}`:e,r=new EventSource(o);return r.addEventListener("invalidate",s=>{pt(s.data)}),r.addEventListener("preload-hint",s=>{mt(s.data)}),r.addEventListener("error",s=>{console.error("SSE connection error:",s)}),new dt(r)}async function pt(e){const t=e.split(",").map(o=>o.trim());console.log("[CountCachula] Invalidating tags:",t);const n=new Set;t.forEach(o=>{const r=B.get(o);r&&r.forEach(s=>n.add(s))});for(const o of n){const r=H.get(o);if(r&&r.size>0)if(Array.from(r).some(i=>i.hasObservers())){console.log("[CountCachula] Refetching (has observers):",o);const i=new Request(o);for(const _ of r)_.hasObservers()&&await qe(i,_)}else console.log("[CountCachula] Removing from cache (no observers):",o),await(await caches.open(le)).delete(new Request(o));else console.log("[CountCachula] Removing from cache (no observers):",o),await(await caches.open(le)).delete(new Request(o))}}async function mt(e){if(!G.onHint)return;const t=e.split(",").map(n=>n.trim());console.log("[CountCachula] Preload hints received:",t),t.forEach(n=>{J.includes(n)||J.push(n)}),We()}async function We(){for(;J.length>0&&Z<(G.maxConcurrent||3);){const e=J.shift();if(!e)break;Z++,console.log("[CountCachula] Preloading:",e);const t=new Request(e),o=q(t).observe(()=>{o(),Z--,We()})}}function bt(){const[e,t]=S("list"),[n,o]=S([]),[r,s]=S(null),[i,_]=S([]),[d,c]=S("all"),[f,l]=S(!1),[u,h]=S(!0);xe(()=>{let p=null;return ft("/api/cache-events",{preload:{onInvalidate:!1,onHint:!0,maxConcurrent:3}}).then(v=>{p=v}),()=>{p?.close()}},[]),xe(()=>{y(),L()},[d]);const y=async()=>{h(!0);const p=d==="all"?"/api/issues":`/api/issues?status=${d}`,v=new Request(p);q(v).observe(async k=>{const E=await k.json();o(E),h(!1)})},L=async()=>{const p=new Request("/api/labels");q(p).observe(async $=>{const k=await $.json();_(k)})},x=async p=>{const v=new Request(`/api/issues/${p}`);q(v).observe(async k=>{const E=await k.json();s(E)})};return a("div",{class:"min-h-screen bg-gray-50",children:a("div",{class:"max-w-7xl mx-auto px-4 py-8",children:[a("h1",{class:"text-3xl font-bold text-gray-900 mb-8",children:"Bug Tracker"}),u&&e==="list"?a("div",{class:"text-center py-12",children:a("p",{class:"text-gray-500",children:"Loading..."})}):e==="list"?a(lt,{issues:n,onIssueClick:async p=>{await x(p.id),t("detail")},onCreateClick:()=>l(!0),statusFilter:d,onStatusFilterChange:c}):r?a(it,{issue:r,allLabels:i,onBack:()=>{t("list"),s(null),y()},onStatusChange:async p=>{r&&(s({...r,status:p}),await fetch(`/api/issues/${r.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:p})}))},onAddComment:async(p,v)=>{if(!r)return;const $={id:Date.now(),issue_id:r.id,author:p,content:v,created_at:new Date().toISOString()};s({...r,comments:[...r.comments||[],$]}),await fetch(`/api/issues/${r.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:p,content:v})})},onAddLabel:async p=>{if(!r)return;const v=i.find($=>$.id===p);v&&s({...r,labels:[...r.labels,v]}),await fetch(`/api/issues/${r.id}/labels/${p}`,{method:"POST"})},onRemoveLabel:async p=>{r&&(s({...r,labels:r.labels.filter(v=>v.id!==p)}),await fetch(`/api/issues/${r.id}/labels/${p}`,{method:"DELETE"}))}}):null,f&&a(ct,{onClose:()=>l(!1),onSubmit:async(p,v,$)=>{const k={id:Date.now(),title:p,description:v,status:"open",priority:$,labels:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};o(E=>[k,...E]),await fetch("/api/issues",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,description:v,priority:$})})}})]})})}Ye(a(bt,{}),document.getElementById("app"));
